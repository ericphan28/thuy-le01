# ğŸ¤– Copilot Instructions - ThÃº Y ThÃ¹y Trang Project

## ğŸ“š Required Context Reading

**IMPORTANT:** Before starting any task, ALWAYS read these files to understand the project context:

1. **`README.md`** - Complete project overview, tech stack, architecture
2. **`PROJECT_STATUS.md`** - Current implementation status, next priorities, technical details
3. **`BUSINESS_ANALYSIS.md`** - Business domain expertise, workflow requirements, industry insights

**Command to get context:**
```bash
# Read all project documentation first
# Then analyze the specific task requirements
```

## ğŸ¯ Project Identity

**Company:** ThÃº Y ThÃ¹y Trang (Veterinary retail business)  
**Developer:** Tháº¯ng Phan - Gia Kiá»‡m Sá»‘  
**Contact:** ericphan28@gmail.com, Zalo: 0907136029  
**Industry:** Veterinary equipment, medicine & livestock supplies  
**Business Model:** B2B sales to farms + B2C retail to individual customers  

## ğŸ—ï¸ Technical Stack & Standards

### **Core Technologies**
- **Frontend:** Next.js 15 (App Router), TypeScript, React 19
- **Backend:** Supabase (PostgreSQL + Auth + Real-time)
- **UI Library:** shadcn/ui + Radix UI + Tailwind CSS
- **Animations:** Framer Motion
- **State Management:** Zustand (sidebar state) + Supabase Auth context
- **Icons:** Lucide React
- **Theme:** next-themes with Vietnamese labels

### **File Structure Rules**
```
app/                    # Next.js App Router pages
â”œâ”€â”€ dashboard/          # Main application (protected routes)
â”œâ”€â”€ auth/              # Authentication pages  
â”œâ”€â”€ layout.tsx         # Root layout
â””â”€â”€ page.tsx           # Landing page

components/            # Reusable components
â”œâ”€â”€ ui/               # shadcn/ui base components (don't modify)
â”œâ”€â”€ layout/           # Layout components (sidebar, header, dashboard-layout)
â”œâ”€â”€ products/         # Product management components
â”œâ”€â”€ customers/        # Customer management components
â””â”€â”€ [module]/         # Other business modules

lib/                  # Utilities & configurations
â”œâ”€â”€ supabase/         # Database client/server setup
â”œâ”€â”€ store.ts          # Zustand global state
â””â”€â”€ utils.ts          # Utility functions
```

## ğŸ’» Terminal & Development Environment

### **CRITICAL: Terminal Usage**
- **ALWAYS use PowerShell** (not cmd) - This is the default terminal in VS Code
- **Command joining:** Use `;` for multiple commands on one line
- **Path separators:** Use `\` for Windows paths or forward slashes for cross-platform
- **Example commands:**
```powershell
# Correct PowerShell syntax
npm install; npm run dev

# Package installation
npm install @types/node --save-dev

# File operations
New-Item -ItemType Directory -Path "components\products"
```

## ğŸš¨ Code Quality Standards

### **ESLint & TypeScript Rules**
**CRITICAL:** Always generate clean code without linting/TypeScript errors

#### **Common Issues to Avoid:**

1. **Unused Imports**
```typescript
// âŒ Bad - unused import
import { Button, Card } from "@/components/ui/button"

// âœ… Good - only import what's used
import { Button } from "@/components/ui/button"
```

2. **TypeScript Errors**
```typescript
// âŒ Bad - missing types
const user = data.user  // Property 'user' may not exist

// âœ… Good - proper typing
const user = data?.user || null
const { data: { user } } = await supabase.auth.getUser()
```

3. **useState Destructuring**
```typescript
// âŒ Bad - incorrect destructuring
const [isOpen, setIsOpen] = useState(false)

// âœ… Good - correct syntax
const [isOpen, setIsOpen] = useState<boolean>(false)
```

4. **Event Handlers**
```typescript
// âŒ Bad - missing event types
const handleClick = (e) => {}

// âœ… Good - proper typing
const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {}
```

### **Component Standards**

#### **Client vs Server Components**
```typescript
// âœ… Server Component (default)
export default function ProductsPage() {
  // No useState, useEffect, event handlers
  return <div>Server rendered content</div>
}

// âœ… Client Component
"use client"
import { useState } from "react"

export function InteractiveComponent() {
  const [state, setState] = useState("")
  return <button onClick={() => setState("clicked")}>Click</button>
}
```

#### **Import Organization**
```typescript
// âœ… Correct import order
// 1. React & Next.js
import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"

// 2. Third-party libraries
import { motion } from "framer-motion"
import { User } from "@supabase/supabase-js"

// 3. UI Components
import { Button } from "@/components/ui/button"
import { Card } from "@/components/ui/card"

// 4. Internal components
import { Sidebar } from "@/components/layout/sidebar"
import { ProductForm } from "@/components/products/product-form"

// 5. Utils & lib
import { createClient } from "@/lib/supabase/client"
import { cn } from "@/lib/utils"

// 6. Types (if separate file)
import type { Product, Customer } from "@/types"
```

## ğŸ¨ UI/UX Standards

### **Design System**
- **Primary Color:** Blue (#3B82F6)  
- **Font:** Inter (system fallback)
- **Spacing:** Tailwind spacing scale (4, 8, 12, 16, 24, 32...)
- **Borders:** rounded-lg (8px) for cards, rounded-md (6px) for buttons
- **Shadows:** Use Tailwind shadow classes

### **Component Patterns**
```typescript
// âœ… Standard component structure
interface ComponentProps {
  title: string
  children?: React.ReactNode
  className?: string
}

export function StandardComponent({ title, children, className }: ComponentProps) {
  return (
    <div className={cn("default-classes", className)}>
      <h2 className="text-xl font-semibold">{title}</h2>
      {children}
    </div>
  )
}
```

### **Vietnamese Interface**
- **All user-facing text in Vietnamese**
- **Consistent terminology:** Use business-specific terms from BUSINESS_ANALYSIS.md
- **Examples:**
  - Dashboard â†’ "Tá»•ng quan"
  - Products â†’ "Sáº£n pháº©m"  
  - Customers â†’ "KhÃ¡ch hÃ ng"
  - Orders â†’ "ÄÆ¡n hÃ ng"
  - Inventory â†’ "Kho hÃ ng"

## ğŸ—„ï¸ Database Interaction

### **Supabase Client Usage**
```typescript
// âœ… Server Component
import { createClient } from "@/lib/supabase/server"

// âœ… Client Component  
import { createClient } from "@/lib/supabase/client"

// âœ… Typical query pattern
const { data, error } = await supabase
  .from('products')
  .select('*')
  .eq('active', true)
  .order('name')

if (error) {
  console.error('Database error:', error)
  return null
}
```

### **Database Schema Reference**
```sql
-- Key tables available:
- products (1,049 records) - Veterinary products
- customers (397 records) - Farm & individual customers  
- invoices (739 records) - Sales transactions
- invoice_details - Transaction line items
- product_categories - Product classification
- customer_types - Customer segmentation
- suppliers - Vendor management
- branches - Multi-location support
```

## ğŸš€ Development Workflow

### **Before Starting Any Task:**
1. âœ… Read `README.md`, `PROJECT_STATUS.md`, `BUSINESS_ANALYSIS.md`
2. âœ… Understand the business context (veterinary retail)
3. âœ… Check current implementation status  
4. âœ… Identify required components/pages
5. âœ… Plan the technical approach

### **During Implementation:**
1. âœ… Use TypeScript strictly (no `any` types)
2. âœ… Follow shadcn/ui patterns for components
3. âœ… Implement responsive design (mobile-first)
4. âœ… Add proper error handling
5. âœ… Include loading states
6. âœ… Test in both light/dark themes

### **After Implementation:**
1. âœ… Run `npm run build` to check for errors
2. âœ… Test authentication flows
3. âœ… Verify responsive behavior
4. âœ… Check console for warnings/errors

## ğŸ¯ Current Phase 2 Priorities

### **Next Implementation: Product Management**
**Status:** Database ready, UI components needed

**Required Pages:**
- `app/dashboard/products/page.tsx` - Main product listing
- `app/dashboard/products/create/page.tsx` - Add new product
- `app/dashboard/products/[id]/page.tsx` - Edit product details

**Required Components:**
- `components/products/product-list.tsx` - Data table with filters
- `components/products/product-form.tsx` - Create/edit form
- `components/products/product-card.tsx` - Grid view item
- `components/products/category-filter.tsx` - Category selection

**Key Features:**
- Real-time search & filtering
- Category management
- Stock level indicators  
- Expiry date tracking (critical for medicines)
- Multi-unit support (bottles, kg, boxes, etc.)

## ğŸ’¡ Business Context Rules

### **Veterinary Industry Specifics:**
- **Expiry tracking mandatory** for medicines & vaccines
- **Batch/Lot numbers** required for regulated products
- **Cold chain products** need temperature indicators
- **Dosage information** critical for safety
- **Prescription requirements** for certain medicines

### **Customer Behavior Patterns:**
- **Large farms:** Bulk orders, credit terms, scheduled deliveries
- **Small farmers:** Smaller quantities, mixed payment methods
- **Walk-in customers:** Immediate needs, cash payments
- **Emergency orders:** After-hours, premium pricing

### **Seasonal Considerations:**
- **Peak season:** April-August (rainy season, disease outbreaks)
- **Low season:** November-February (dry season)
- **Inventory planning:** Stock up before peak seasons
- **Cash flow:** Manage credit terms during low seasons

## ğŸ”§ Advanced Implementation Notes

### **State Management Strategy:**
```typescript
// âœ… Use Zustand for UI state (sidebar, modals, filters)
// âœ… Use Supabase Auth for user state
// âœ… Use React Query for server state (if needed)
// âœ… Local useState for component-specific state
```

### **Performance Considerations:**
- **Large datasets:** Implement pagination (100 items/page)
- **Real-time updates:** Use Supabase subscriptions sparingly
- **Image optimization:** Use Next.js Image component
- **Bundle size:** Import only needed parts of libraries

### **Security Requirements:**
- **Row Level Security:** All database access filtered by user permissions
- **Input validation:** Use Zod schemas for form validation
- **SQL injection prevention:** Use parameterized queries only
- **Authentication checks:** Verify auth status on all protected routes

## ğŸ“± Mobile Responsiveness

### **Breakpoint Strategy:**
```css
/* Mobile first approach */
sm: 640px   /* Small tablets */
md: 768px   /* Tablets */ 
lg: 1024px  /* Laptops */
xl: 1280px  /* Desktops */
```

### **Mobile UX Patterns:**
- **Navigation:** Sidebar becomes full-screen overlay
- **Tables:** Transform to cards on mobile
- **Forms:** Single column layout, larger touch targets
- **Search:** Prominent search bar, voice input ready

---

## ğŸ¯ Success Criteria

**Every code change must:**
- âœ… Pass TypeScript compilation without errors
- âœ… Pass ESLint without warnings  
- âœ… Work in both light/dark themes
- âœ… Be responsive on mobile/tablet/desktop
- âœ… Follow Vietnamese localization
- âœ… Implement proper error handling
- âœ… Include loading states for async operations
- âœ… Match the established design system

**Business requirements:**
- âœ… Support veterinary industry workflows
- âœ… Handle real data volumes (1000+ products, 400+ customers)
- âœ… Provide intuitive user experience for non-technical users
- âœ… Enable efficient daily operations (order processing, inventory management)

---

**Last Updated:** July 31, 2025  
**Current Phase:** Phase 1 Complete âœ… â†’ Phase 2 Product Management Ready ğŸš€
